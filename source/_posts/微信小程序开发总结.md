---
title: 微信小程序开发总结
date: 2019-06-15 17:29:51
categories: 
- css
tags:
---

### 微信小程序开发总结

#### 一、 实现页面向上滑动或者向下滑动时按钮隐藏，当滑动停止的时候，按钮出现

```html
<view
    :class="!isShowWriteBtn ? 'hide_page_bottom' : '' "
    class="page_bottom"
    @click="writeWineComment"
>
    <view class="write_wine_comment">写酒评</view>
</view>
<style>
    /* 写酒评 */
    .page_bottom {
        position: fixed;
        bottom: 70upx;
        left: 50%;
        margin-left: -90upx;
        width: 180upx;
        height: 80upx;
        line-height: 80upx;
        text-align: center;
        background: #ffc91f;
        border-radius: 36upx;
        box-shadow: 0 5upx 20upx #ffc91f;
        transition: all 0.6s ease-in-out;
    }
    .hide_page_bottom {
        bottom: -80upx;
    }
    .write_wine_comment {
        font-size: 30upx;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
    }
</style>
```

```js
export default {
    data() {
        return {
            scrollTop: 0, // 页面滑动后距离顶部的距离
            isShowWriteBtn: true // 是否显示底部写酒评按钮
        };
    },
    onPageScroll(ev) {
        this.handWriteBtn(ev);
    },
    methods: {
        // 处理滑动时底部发酒评按钮显示隐藏
        handWriteBtn(ev) {
            let that = this;
            //当滚动的top值最大或最小时，为什么要做这一步是因为在手机实测小程序的时候会发生滚动条回弹，所以为了处理回弹，设置默认最大最小值
            if (ev.scrollTop <= 0) {
                ev.scrollTop = 0;
            } else if (ev.scrollTop > uni.getSystemInfoSync().windowHeight) {
                ev.scrollTop = uni.getSystemInfoSync().windowHeight;
            }
            //判断浏览器滚动条上下滚动
            if (
                ev.scrollTop > this.scrollTop ||
                ev.scrollTop == uni.getSystemInfoSync().windowHeight
            ) {
                //向下滚动
                that.isShowWriteBtn = false;
            } else {
                //向上滚动
                that.isShowWriteBtn = false;
            }
            //给scrollTop重新赋值
            setTimeout(() => {
                that.scrollTop = ev.scrollTop;
                setTimeout(() => {
                    // 如果当前的scrollTop和滚动的scrollTop值相同时，表示你滑动已经停止
                    if (ev.scrollTop == that.scrollTop) {
                        that.isShowWriteBtn = true;
                    }
                }, 300);
            });
        },
        // 写酒评
        writeWineComment() {
            // 处理函数逻辑
            //this.isShowCommentModal = true;
        }
    }
};
```
